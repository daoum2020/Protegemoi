<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="brand">Prot√®geMoi</title>
  <link rel="stylesheet" href="styles.css" />
<meta property="og:title" content="Prot√®geMoi ‚Äî Abonnement">
<meta property="og:image" content="assets/cover.png">

<link rel="alternate" hreflang="fr" href="https://daoum2020.github.io/Protegemoi/billing.html?lang=fr">
<link rel="alternate" hreflang="en" href="https://daoum2020.github.io/Protegemoi/billing.html?lang=en">
<link rel="alternate" hreflang="es" href="https://daoum2020.github.io/Protegemoi/billing.html?lang=es">
</head>
<body>
  <header class="topbar">
    <a class="brand" href="index.html">
      <img loading="lazy" src="assets/logo.png" alt="Logo" class="logo" />
      <span class="brand-text" data-i18n="brand">Prot√®geMoi</span>
    </a>
    <div class="right"><button id="themeToggle" class="theme-toggle" title="Theme">üåô</button>
      <label class="lang-label" for="lang" data-i18n="lang_label">Langue</label>
      <select id="lang" onchange="setLang(this.value,true)">
        <option value="fr">FR</option>
        <option value="en">EN</option>
        <option value="es">ES</option>
      </select>
      <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="mainmenu" onclick="toggleMenu()">‚ò∞</button>
    </div>
    <nav id="mainmenu" class="menu" aria-label="Main menu">
      <a href="index.html" onclick="closeMenu()" data-i18n="menu_home">Accueil</a>
      <a href="dashboard.html" onclick="closeMenu()" data-i18n="menu_dashboard">Tableau de bord</a>
      <a href="settings.html" onclick="closeMenu()" data-i18n="menu_settings">Param√®tres</a>
      <a href="stats.html" onclick="closeMenu()" data-i18n="menu_stats">Statistiques</a>
      <a href="billing.html" onclick="closeMenu()" data-i18n="menu_billing">Abonnement</a>
      <a href="login.html" class="login" onclick="closeMenu()" data-i18n="menu_login">Connexion</a>
    <a href="link-child.html" onclick="closeMenu()" data-i18n="menu_link_child">Lier un enfant</a>
    <a href="admin.html" onclick="closeMenu()" class="admin-only" style="display:none">Admin</a>
    </nav>
  </header>
  <main class="container">

<section class="card" id="billing">
  <h2 data-i18n="billing">Abonnement</h2>
  <p data-i18n="billing_desc">G√©rez votre offre et votre facturation.</p>
<div class="cta">
  <button class="btn primary" onclick="checkout('oneChild')">1 enfant</button>
  <button class="btn primary" onclick="checkout('twoChildren')">2 enfants</button>
  <button class="btn primary" onclick="checkout('threeChildren')">3 enfants</button>
</div>
<p class="muted small">Demo : n√©cessite `config.js` avec `window.PM_CONFIG.prices.*` configur√©s et Stripe Checkout c√¥t√© serveur ou lien Stripe.</p>
<script>
function checkout(plan){
  if(!window.PM_CONFIG||!window.PM_CONFIG.prices||!window.PM_CONFIG.prices[plan]){ alert('Plan non configur√©'); return; }
  // D√©mo: si vous avez des URLs de Checkout h√©berg√©es, redirigez dessus :
  const priceId = window.PM_CONFIG.prices[plan];
  const url = (window.PM_CONFIG && window.PM_CONFIG.checkoutUrls && window.PM_CONFIG.checkoutUrls[plan]) || `https://checkout.stripe.com/pay/${priceId}`; window.location.href = url;
}
</script>
</section>

  

<section class="card" id="pricing">
  <h1 style="margin-bottom:8px">Choisissez votre offre</h1>
  <p class="muted" style="margin-top:0">Abonnement simple et sans engagement. Changez entre <b>Mensuel</b> et <b>Annuel</b> (2 mois offerts).</p>

  
  <div class="billing-toggle" aria-label="S√©lecteur de p√©riode">
    <button id="btn-monthly" class="toggle active">Mensuel</button>
    <button id="btn-yearly" class="toggle">Annuel <span class="discount">-17%</span></button>
  </div>


  <div class="grid-3">
    <div class="price-card" data-plan="oneChild">
      <h3>Protection 1 enfant</h3>
      <div class="price"><span class="amount" data-month="9,99" data-year="99">9,99</span> ‚Ç¨ <small class="per">/ mois</small></div>
      <ul>
        <li>Surveillance intelligente IA</li>
        <li>D√©tection harc√®lement et pr√©dateurs</li>
        <li>Non d√©sinstallable par l‚Äôenfant</li>
      </ul>
      <button class="btn primary action">Prot√©ger maintenant</button>
    </div>

    <div class="price-card highlight" data-plan="twoChildren">
      <div class="badge">Populaire</div>
      <h3>Protection 2 enfants</h3>
      <div class="price"><span class="amount" data-month="13,99" data-year="139">13,99</span> ‚Ç¨ <small class="per">/ mois</small></div>
      <ul>
        <li>Tout de l‚Äôoffre 1 enfant</li>
        <li>2 profils enfant inclus</li>
      </ul>
      <button class="btn primary action">Prot√©ger maintenant</button>
    </div>

    <div class="price-card" data-plan="threeChildren">
      <h3>Protection 3 enfants</h3>
      <div class="price"><span class="amount" data-month="17,99" data-year="169">17,99</span> ‚Ç¨ <small class="per">/ mois</small></div>
      <ul>
        <li>Tout de l‚Äôoffre 2 enfants</li>
        <li>3 profils enfant inclus</li>
      </ul>
      <button class="btn primary action">Prot√©ger maintenant</button>
    </div>
  </div>
</section>

<style>
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.price-card{background:var(--card);border:1px solid #e7edf6;border-radius:14px;padding:18px;position:relative}
.price-card .price{font-size:28px;font-weight:700;margin:6px 0}
.price-card ul{padding-left:18px;line-height:1.5}
.price-card .badge{position:absolute;top:-10px;right:12px;background:#ffd166;color:#111;
  font-size:12px;font-weight:700;padding:4px 8px;border-radius:8px}
.price-card.highlight{box-shadow:0 10px 28px rgba(0,0,0,.12);border-color:#d7e2f1}
.billing-toggle{display:inline-flex;border:1px solid #dbe6f5;border-radius:10px;overflow:hidden;margin:10px 0 20px}
.toggle{padding:8px 14px;border:0;background:transparent;cursor:pointer}
.toggle.active{background:#2F80ED;color:#fff}
@media (max-width: 800px){.grid-3{grid-template-columns:1fr}}

.billing-toggle .discount{
  background:#27ae60;
  color:#fff;
  font-size:11px;
  font-weight:700;
  padding:2px 6px;
  border-radius:6px;
  margin-left:4px;
}


.save-badge{display:inline-block;margin-left:6px;padding:2px 6px;border-radius:8px;
  background:#10b981;color:#fff;font-size:12px;font-weight:700;vertical-align:middle}
.toggle.active .save-badge{background:#0ea371}
</style>

<script>
(function(){
  const btnMonthly = document.getElementById('btn-monthly');
  const btnYearly = document.getElementById('btn-yearly');
  const cards = document.querySelectorAll('.price-card');

  function setMode(mode){
    btnMonthly.classList.toggle('active', mode==='monthly');
    btnYearly.classList.toggle('active', mode==='yearly');

    cards.forEach(card => {
      const amountEl = card.querySelector('.amount');
      const perEl = card.querySelector('.per');
      const month = amountEl.getAttribute('data-month');
      const year = amountEl.getAttribute('data-year');
      if(mode==='yearly'){ amountEl.textContent = year; perEl.textContent = '/ an'; }
      else { amountEl.textContent = month; perEl.textContent = '/ mois'; }
    });

    // Attach correct Stripe URL set
    const yearly = mode === 'yearly';
    const urls = yearly ? (window.PM_CONFIG.checkoutUrlsYearly || {}) : (window.PM_CONFIG.checkoutUrls || {});
    document.querySelectorAll('.price-card .action').forEach(btn=>{
      btn.onclick = () => {
        const plan = btn.closest('.price-card').getAttribute('data-plan');
        const url = urls[plan];
        if(!url || /_demo$/.test(url)){
          alert('Lien Stripe non configur√© pour ' + (yearly?'annuel':'mensuel') + '. Ouvrez config.js > ' + (yearly?'checkoutUrlsYearly':'checkoutUrls'));
          return;
        }
        window.location.href = url;
      };
    });
  }

  btnMonthly.addEventListener('click', ()=>setMode('monthly'));
  btnYearly.addEventListener('click', ()=>setMode('yearly'));

  // default monthly
  setMode('monthly');
})();
</script>

<style>
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.price-card{background:var(--card);border:1px solid #e7edf6;border-radius:14px;padding:18px;position:relative}
.price-card .price{font-size:28px;font-weight:700;margin:6px 0}
.price-card ul{padding-left:18px;line-height:1.5}
.price-card .badge{position:absolute;top:-10px;right:12px;background:#ffd166;color:#111;
  font-size:12px;font-weight:700;padding:4px 8px;border-radius:8px}
.price-card.highlight{box-shadow:0 10px 28px rgba(0,0,0,.12);border-color:#d7e2f1}
@media (max-width: 800px){.grid-3{grid-template-columns:1fr}}

.billing-toggle .discount{
  background:#27ae60;
  color:#fff;
  font-size:11px;
  font-weight:700;
  padding:2px 6px;
  border-radius:6px;
  margin-left:4px;
}


.save-badge{display:inline-block;margin-left:6px;padding:2px 6px;border-radius:8px;
  background:#10b981;color:#fff;font-size:12px;font-weight:700;vertical-align:middle}
.toggle.active .save-badge{background:#0ea371}
</style>
<script>
function checkoutPlan(key){
  const url = window.PM_CONFIG && window.PM_CONFIG.checkoutUrls && window.PM_CONFIG.checkoutUrls[key];
  if(!url || /_demo$/.test(url)){ alert('Lien Stripe non configur√©. Ouvrez config.js > checkoutUrls'); return; }
  window.location.href = url;
}
</script>

</main>
  <footer class="footer">
    <p>¬© <span id="year"></span> <span data-i18n="copyright">Prot√®geMoi</span></p>
  </footer>
  <script src="script.js"></script>
  <script src="i18n.js"></script>
  <script type="module" src="auth.js"></script>
</body>
</html>

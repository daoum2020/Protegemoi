
(function(){function S(){try{var e=localStorage.getItem("pm_lang");e?document.documentElement.setAttribute("data-lang",e):document.documentElement.hasAttribute("data-lang")||document.documentElement.setAttribute("data-lang","fr")}catch(e){}}S(),document.querySelectorAll('a[data-lang]').forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var a=e.getAttribute("data-lang");document.documentElement.setAttribute("data-lang",a);try{localStorage.setItem("pm_lang",a)}catch(e){}document.querySelectorAll('a[data-lang]').forEach(function(e){e.classList.toggle("active",e.getAttribute("data-lang")===a)})})});var e=document.getElementById("hamb"),t=document.getElementById("drawer");e&&t&&(e.addEventListener("click",function(){t.classList.toggle("open"),t.setAttribute("aria-hidden",t.classList.contains("open")?"false":"true")}),t.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){t.classList.remove("open"),t.setAttribute("aria-hidden","true")})}));var a=document.getElementById("track"),n=document.getElementById("dots");if(a&&n){var l=[].slice.call(a.children),c=0;l.forEach(function(e,t){var a=document.createElement("button");0===t&&a.classList.add("active"),a.addEventListener("click",function(){c=t,i()}),n.appendChild(a)});function i(){a.style.transform="translateX(-"+100*c+"%)",n.querySelectorAll("button").forEach(function(e,t){e.classList.toggle("active",t===c)})}setInterval(function(){c=(c+1)%l.length,i()},2e3)}var r=document.getElementById("pmToggle"),o=document.getElementById("pmPromo"),d=document.getElementById("pmApply"),m=document.getElementById("pmMsg"),p=[].slice.call(document.querySelectorAll("#pmCards .pm-card")),s=!1;function g(){var e=(document.documentElement.getAttribute("data-lang")||"fr",["fr","es","nl"].includes(document.documentElement.getAttribute("data-lang")||"fr"));return function(t){var a=t.toFixed(2);return(e?a.replace(".",","):a)+" €"}}function u(){var e=document.documentElement.getAttribute("data-lang")||"fr",t=r&&r.checked;return t?{fr:" / an",en:" / year",es:" / año",nl:" / jaar"}[e]:" / mois"===({fr:" / mois",en:" / month",es:" / mes",nl:" / maand"}[e]||" / mois")}function v(){p.forEach(function(e){var t=parseFloat((r&&r.checked)?e.dataset.year:e.dataset.month),a=e.querySelector(".pm-amount"),n=e.querySelector(".pm-strike"),l=g()(t);s?(n.textContent=l,n.style.visibility="visible",a.textContent=g()(t*.5)+u()):(n.style.visibility="hidden",a.textContent=l+u())})}d&&d.addEventListener("click",function(){var e=(o.value||"").trim().toUpperCase(),t=document.documentElement.getAttribute("data-lang")||"fr";s="PROTEGEMOI2026"===e,m.textContent=s?{fr:"Code appliqué : -50%",en:"Promo applied: -50%",es:"Código aplicado: -50%",nl:"Code toegepast: -50%"}[t]:"Code invalide"===({fr:"Code invalide",en:"Invalid code",es:"Código inválido",nl:"Ongeldige code"}[t]||"Code invalide"),m.style.color=s?"green":"#b91c1c",v()}),r&&r.addEventListener("change",v);var h=new MutationObserver(v);h.observe(document.documentElement,{attributes:!0,attributeFilter:["data-lang"]}),v()})();
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self' https://www.gstatic.com https://www.googletagmanager.com; connect-src 'self' https://firestore.googleapis.com https://firebaseinstallations.googleapis.com https://fcmregistrations.googleapis.com https://fcm.googleapis.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://*.cloudfunctions.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data:; frame-ancestors 'none'; base-uri 'self'; form-action 'self' https://checkout.stripe.com; upgrade-insecure-requests">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="brand">Prot√®geMoi</title>
  <link rel="stylesheet" href="styles.css" />
<meta property="og:title" content="Prot√®geMoi ‚Äî Connexion">
<meta property="og:image" content="assets/cover.png">

<link rel="alternate" hreflang="fr" href="https://daoum2020.github.io/Protegemoi/login.html?lang=fr">
<link rel="alternate" hreflang="en" href="https://daoum2020.github.io/Protegemoi/login.html?lang=en">
<link rel="alternate" hreflang="es" href="https://daoum2020.github.io/Protegemoi/login.html?lang=es">
</head>
<body>
  <header class="topbar">
    <a class="brand" href="index.html">
      <img loading="lazy" src="assets/logo.png" alt="Logo" class="logo" />
      <span class="brand-text" data-i18n="brand">Prot√®geMoi</span>
    </a>
    <div class="right"><button id="themeToggle" class="theme-toggle" title="Theme">üåô</button>
      <label class="lang-label" for="lang" data-i18n="lang_label">Langue</label>
      <select id="lang" onchange="setLang(this.value,true)">
        <option value="fr">FR</option>
        <option value="en">EN</option>
        <option value="es">ES</option>
      </select>
      <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="mainmenu" onclick="toggleMenu()">‚ò∞</button>
    </div>
    <nav id="mainmenu" class="menu" aria-label="Main menu">
      <a href="index.html" onclick="closeMenu()" data-i18n="menu_home">Accueil</a>
      <a href="dashboard.html" onclick="closeMenu()" data-i18n="menu_dashboard">Tableau de bord</a>
      <a href="settings.html" onclick="closeMenu()" data-i18n="menu_settings">Param√®tres</a>
      <a href="stats.html" onclick="closeMenu()" data-i18n="menu_stats">Statistiques</a>
      <a href="billing.html"
      <a href="subscription.html" data-i18n="menu_subscription">Abonnements</a>
      <!-- replaced --> onclick="closeMenu()" data-i18n="menu_billing">Abonnement</a>
      <a href="login.html" class="login" onclick="closeMenu()" data-i18n="menu_login">Connexion</a>
    <a href="link-child.html" onclick="closeMenu()" data-i18n="menu_link_child">Lier un enfant</a>
    <a href="admin.html" onclick="closeMenu()" class="admin-only" style="display:none">Admin</a>
    </nav>
  </header>
  <main class="container">

<section class="card guest-only" id="login">
  <h2 data-i18n="login">Connexion</h2>
  <form class="form" id="loginForm">
    <label><span data-i18n="email">Email</span><input type="email" placeholder="vous@exemple.com" required></label>
    <label><span data-i18n="password">Mot de passe</span><input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required></label>
    <button class="btn primary" type="submit" id="loginBtn" data-i18n="btn_login">Se connecter</button>
  </form>
  <p class="muted small"><span data-i18n="no_account">Pas encore de compte ?</span> <a href="signup.html" data-i18n="create_account">Cr√©er un compte</a></p>
<p class="muted small guest-only"><a href="reset.html">Mot de passe oubli√© ?</a></p>
</section>

  </main>
  <footer class="footer">
    <p>¬© <span id="year"></span> <span data-i18n="copyright">Prot√®geMoi</span></p>
  </footer>
  <script src="script.js"></script>
  <script src="i18n.js"></script>
  <script src="config.js"></script>
  <script type="module" src="auth.js"></script>
<script>
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const [emailEl, passEl] = e.target.querySelectorAll('input');
  try{ await PM_AUTH.login(emailEl.value, passEl.value); alert('Connect√©'); window.location.href='dashboard.html'; }
  catch(err){ alert('Erreur de connexion'); console.error(err); }
});
</script>
<script>(function(){const f=document.getElementById('loginForm');if(f)f.addEventListener('submit',e=>{const em=(f.querySelector('input[type="email"]')||{}).value||null; if(em) localStorage.setItem('pm_user_email', JSON.stringify(em));});})();</script>
</body>
</html>
